<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>deepr.love</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-mode">
    <div class="container">
        <header>
            <img src="assets/logo.png" alt="deepr.love Logo" class="logo">
            <h1>deepr.love</h1>
            <button id="help-flow" class="help-icon" aria-label="Help" data-modal="flow-help-modal">?</button>
            <div class="header-right">
                <div class="better-with-headphones">üéß better with headphones</div>
                <button id="stop-all" class="stop-button">‚èπÔ∏è Stop All</button>
                <button id="theme-toggle" class="theme-toggle">üåô</button>
            </div>
        </header>

        <main>
            <section id="music-section">
                <h2>Music Selection</h2>
                <div class="track-selection">
                    <select id="track-selector">
                        <option value="">Select a Track</option>
                    </select>
                    <div class="version-selector">
                        <button id="version-a" class="version-btn active">Version A</button>
                        <button id="version-b" class="version-btn">Version B</button>
                    </div>
                </div>
                <div class="controls">
                    <button id="play-pause">Play</button>
                    <button id="loop">Loop</button>
                    <div class="volume-control">
                        <label>Music Volume</label>
                        <input type="range" id="music-volume" min="0" max="100" value="60">
                        <span class="volume-value">60%</span>
                    </div>
                </div>
            </section>

            <section id="binaural-section">
                <div class="section-header">
                    <h2>Binaural Beat Generator</h2>
                    <button id="help-icon" class="help-icon" aria-label="Help" data-modal="help-modal">?</button>
                </div>
                <div class="frequency-layers">
                    <div class="layer-group">
                        <h3>Alpha Bridge Layer (8.4-12 Hz)</h3>
                        <div class="frequency-buttons">
                            <button class="freq-btn" data-layer="alpha" data-index="0">Bridge Conscious/Subconscious (8.4 Hz)</button>
                            <button class="freq-btn" data-layer="alpha" data-index="1">Mind-Body Integration (10.5 Hz)</button>
                            <button class="freq-btn" data-layer="alpha" data-index="2">Centering/Grounding (12 Hz)</button>
                        </div>
                    </div>
                    
                    <div class="layer-group">
                        <h3>Theta Transformation Layer (4.5-7.5 Hz)</h3>
                        <div class="frequency-buttons">
                            <button class="freq-btn" data-layer="theta" data-index="0">Deep Meditation (4.5 Hz)</button>
                            <button class="freq-btn" data-layer="theta" data-index="1">Inner Child Healing (5.5 Hz)</button>
                            <button class="freq-btn" data-layer="theta" data-index="2">Creative Reprogramming (7.0 Hz)</button>
                        </div>
                    </div>
                    
                    <div class="layer-group">
                        <h3>Delta Reprogramming Layer (0.5-4.0 Hz)</h3>
                        <div class="frequency-buttons">
                            <button class="freq-btn" data-layer="delta" data-index="0">Trauma Release (1.0 Hz)</button>
                            <button class="freq-btn" data-layer="delta" data-index="1">Healing Sleep (2.25 Hz)</button>
                            <button class="freq-btn" data-layer="delta" data-index="2">Subconscious Access (3.5 Hz)</button>
                        </div>
                    </div>
                </div>

                <div class="journey-presets">
                    <h3>Therapeutic Journeys</h3>
                    <div class="preset-buttons">
                        <div class="journey-preset">
                            <button class="journey-btn" data-journey="habitChange">Habit Change Journey</button>
                            <p class="journey-description">
                                Progressive transition through states:<br>
                                ‚Ä¢ Alpha (10 Hz) - 5min: Conscious awareness<br>
                                ‚Ä¢ Theta (6 Hz) - 10min: Deep reprogramming<br>
                                ‚Ä¢ Delta (3 Hz) - 5min: Subconscious integration
                            </p>
                        </div>
                        <div class="journey-preset">
                            <button class="journey-btn" data-journey="emotionalHealing">Emotional Healing</button>
                            <p class="journey-description">
                                Theta-focused healing:<br>
                                ‚Ä¢ Primary: 5.5 Hz - Emotional processing<br>
                                ‚Ä¢ Secondary: 7.5 Hz - Creative reprogramming<br>
                                ‚Ä¢ Alternating pattern for deep healing
                            </p>
                        </div>
                        <div class="journey-preset">
                            <button class="journey-btn" data-journey="deepSleep">Deep Sleep Rewiring</button>
                            <p class="journey-description">
                                Delta-dominant pattern:<br>
                                ‚Ä¢ Theta (4.5 Hz) - 5min: Gentle transition<br>
                                ‚Ä¢ Delta (2.0 Hz) - 10min: Deep healing sleep<br>
                                ‚Ä¢ Delta (3.5 Hz) - 5min: Subconscious access
                            </p>
                        </div>
                    </div>
                </div>

                <div class="volume-control">
                    <label>Binaural Volume</label>
                    <input type="range" id="binaural-volume" min="0" max="100" value="5">
                    <span class="volume-value">5%</span>
                </div>
                <div id="frequency-display">Current Frequency: <span>8.4 Hz</span></div>
                <div id="journey-status" style="display: none;">
                    Journey Progress: <span>0%</span>
                    <div class="journey-progress-bar">
                        <div class="progress"></div>
                    </div>
                </div>
            </section>

            <section id="ai-script-section">
                <div class="section-header">
                    <h2>Affirmation Generator</h2>
                    <button id="help-affirmations" class="help-icon" aria-label="Help" data-modal="ai-help-modal">?</button>
                </div>
                <div class="generator-controls">
                    <select id="category-select">
                        <option value="">Select a Category</option>
                    </select>
                    <input type="text" id="intention-input" placeholder="Enter your intention or goal...">
                    <button id="generate-script" class="primary-btn">Generate Affirmations</button>
                </div>
                <textarea id="affirmations-area" readonly placeholder="Your personalized affirmations will appear here..."></textarea>
                <div class="action-buttons">
                    <button id="save-affirmation" class="secondary-btn">
                        <span class="icon">üíæ</span> Save to Favorites
                    </button>
                    <button id="view-favorites" class="secondary-btn">
                        <span class="icon">‚≠ê</span> View Favorites
                    </button>
                </div>
            </section>

            <section id="voice-section">
                <div class="section-header">
                    <h2>Voice Recording</h2>
                </div>
                <div class="voice-controls">
                    <button id="record-btn" class="control-btn">
                        <span class="record-icon"></span>
                        Record
                    </button>
                    <button id="play-btn" class="control-btn" disabled>
                        <span class="play-icon"></span>
                        Play
                    </button>
                    <button id="loop-btn" class="control-btn special-btn" disabled>
                        <span class="loop-icon"></span>
                        Loop (Deep Entrainment)
                    </button>
                </div>
                <div class="recording-status">
                    <span id="recording-time">00:00</span>
                </div>
                <div class="volume-control">
                    <label>Voice Volume</label>
                    <input type="range" id="voice-volume" min="0" max="100" value="100">
                    <span class="volume-value">100%</span>
                </div>
            </section>

            <section id="session-section">
                <div class="section-header">
                    <h2>Session Manager</h2>
                </div>
                <div class="session-controls">
                    <button id="start-session" class="primary-btn">Start Session</button>
                    <button id="stop-session" class="primary-btn" disabled>Stop Session</button>
                    <div id="session-status">Ready to Start</div>
                </div>
                <div class="session-stats" id="session-stats">
                    <!-- Stats will be populated by JavaScript -->
                </div>
                <div class="session-history" id="session-history">
                    <!-- History visualization will be populated by JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- Help Modals -->
    <div id="flow-help-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('flow-help-modal').style.display='none'">&times;</span>
            <h2>How to Use deepr.love</h2>
            <ol>
                <li>Choose background music (optional) and adjust volume</li>
                <li>Select binaural frequencies or a therapeutic journey:
                    <ul>
                        <li>Single frequencies: Click any frequency button to activate</li>
                        <li>Therapeutic journeys: Choose a preset journey for guided frequency transitions</li>
                    </ul>
                </li>
                <li>Generate personalized affirmations:
                    <ul>
                        <li>Select a category and enter your intention</li>
                        <li>Click generate to create AI-powered affirmations</li>
                        <li>Save your favorites for future sessions</li>
                    </ul>
                </li>
                <li>Record your voice (optional):
                    <ul>
                        <li>Record your affirmations or intentions</li>
                        <li>Play back while listening to binaural beats</li>
                        <li>Loop recording for deeper entrainment</li>
                    </ul>
                </li>
                <li>Save your session settings for future use</li>
            </ol>
            <p class="note">üéß For best results, use headphones and find a quiet space</p>
        </div>
    </div>

    <div id="help-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('help-modal').style.display='none'">&times;</span>
            <h2>Brainwave Frequencies Guide</h2>
            
            <h3>Delta Range (0.5‚Äì4 Hz)</h3>
            <p>Delta waves are the slowest brainwaves, associated with deep sleep, healing, and the subconscious mind.</p>
            <ul>
                <li>0.5‚Äì1.5 Hz: Often linked to deep trauma release and regenerative processes. This aligns with theories that delta waves support the body's natural healing and memory consolidation.</li>
                <li>2.0‚Äì2.5 Hz: Commonly associated with deep restorative sleep, which is critical for physical healing and immune function.</li>
                <li>3.0‚Äì4.0 Hz: Deep subconscious access aligns with findings that delta states are where subconscious processing and profound stillness occur.</li>
            </ul>

            <h3>Theta Range (4‚Äì8 Hz)</h3>
            <p>Theta waves are associated with creativity, intuition, and emotional healing.</p>
            <ul>
                <li>4.5 Hz: This frequency is indeed linked to deep meditation and intuitive insight, often seen in practices like mindfulness or Vipassana meditation.</li>
                <li>5.5 Hz: Inner child/emotional healing resonates with theta's role in processing emotions and fostering connection to deeper psychological layers.</li>
                <li>6.5‚Äì7.5 Hz: Creative reprogramming aligns with theta's association with visualization and accessing creative potential.</li>
            </ul>

            <h3>Alpha Range (8‚Äì12 Hz)</h3>
            <p>Alpha waves are linked to relaxation, creativity, and a bridge between the conscious and subconscious mind.</p>
            <ul>
                <li>8.4 Hz: A plausible "bridge" frequency for integrating conscious and subconscious states, often tied to light meditative or reflective states.</li>
                <li>10.5 Hz: Mind-body integration is consistent with alpha's role in relaxation and synchronizing mental and physical states.</li>
                <li>12 Hz: Centering and grounding fit well here, as higher alpha frequencies are linked to calm focus and balance.</li>
            </ul>

            <div class="note">
                <h4>Notes on Validation</h4>
                <p>While this breakdown is consistent with broader understanding, the specific applications (e.g., "deep trauma release" or "inner child healing") may derive more from anecdotal evidence or specific schools of thought rather than universally accepted neuroscience. The precise effects of these frequencies can also vary depending on the individual, the context, and the method of entrainment.</p>
            </div>
        </div>
    </div>

    <div id="ai-help-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('ai-help-modal').style.display='none'">&times;</span>
            <h2>AI Affirmation Generator Guide</h2>
            <p>This feature harnesses the power of Llama 3.3 AI to create personalized affirmations tailored to your needs.</p>
            <p>As we're using a shared community API, please allow time between requests to ensure everyone can benefit from this resource.</p>
            <p>Don't worry if the AI is temporarily unavailable - you'll still receive quality affirmations from our carefully curated templates.</p>
        </div>
    </div>

    <div id="favorites-modal" class="modal">
        <div class="modal-content">
            <h2>Favorite Affirmations</h2>
            <div id="favorites-list"></div>
            <button class="close-modal">Close</button>
        </div>
    </div>

    <script src="audio-tracks.js"></script>
    <script src="binaural.js"></script>
    <script src="voice-enhancer.js"></script>
    <script src="voice-recording.js"></script>
    <script src="env-config.js"></script>
    <script src="config.js"></script>
    <script src="ai-integration.js"></script>
    <script src="affirmation-system.js"></script>
    <script src="sessions.js"></script>
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const root = document.documentElement;
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme') || 'dark';
        root.dataset.theme = savedTheme;
        themeToggle.textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = root.dataset.theme || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            root.dataset.theme = newTheme;
            localStorage.setItem('theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        });

        // Modal functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Get all modals
            const modals = document.querySelectorAll('.modal');
            const helpButtons = document.querySelectorAll('.help-icon');
            const closeButtons = document.querySelectorAll('.close');

            // Add click event to all help buttons
            helpButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.getAttribute('data-modal');
                    const modal = document.getElementById(modalId);
                    if (modal) modal.style.display = 'block';
                });
            });

            // Add click event to all close buttons
            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modal = button.closest('.modal');
                    if (modal) modal.style.display = 'none';
                });
            });

            // Close modal when clicking outside
            window.addEventListener('click', (event) => {
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });
        });
    </script>
    <script src="app.js"></script>
</body>
</html>
